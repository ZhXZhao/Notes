<!--
 * @Author: ZhXZhao
 * @Date: 2021-01-08 22:17:52
 * @LastEditors: ZhXZhao
 * @LastEditTime: 2021-01-10 16:18:17
 * @Description:
-->
# 什么是Hyperledger Fabric？

Hyperledger Fabric是一个开源的**企业级许可**分布式账本技术(Distributed Ledger Technology DLT)，专为在企业环境中使用而设计。

与其他分布式账本和区块链平台的区别：
1. Fabric具有高度模块化和可配置的架构
2. Fabric是第一个支持通用编程语言编写智能合约（如java、Go和Node.js）的分布式账本平台，这意味着大多数企业无需额外的培训来学习新的语言就可以开发智能合约。
3. Fabric是许可的，与公共无需许可网络不同，参与者彼此了解而不是匿名的或完全不信任的。
4. Fabric支持可插拔的共识协议，不同的场景运用不同的共识协议，以提升性能和吞吐量。

这些特性使得Fabric在交易处理和交易确认延迟方面有较好的性能，并实现了交易的隐私和保密以及智能合约（Fabric称之为“链码”）。

## 模块化

Fabric由以下模块化的组件组成：
+ 可插拔的*排序服务*对交易顺序建立共识，然后向节点广播区块；
+ 可插拔的*成员服务提供者*负责将网络中的实体与加密身份相关联；
+ 可选的P2P *gossip服务*通过排序服务将区块发送到其他节点；
+ 智能合约（“链码”）隔离运行在容器环境（如Docker）中  。它们可以用标准编程语言编写，但不能直接访问账本状态；
+ 账本可以通过配置支持多种DBMS；
+ 可插拔的背书和验证策略，每个应用程序可以独立配置。

## 许可和无需许可区块链

无需许可区块链几乎任何人都可以参与，每个参与者都是匿名的，参与者之间不存在信任，需要用经济激励来抵消参与拜占庭容错共识形式的特殊成本，以弥补信任的缺失。

许可区块链在一定程度信任的治理模型下运作。参与者之间可能不完全信任，但依赖于参与者的身份，可以使用更传统的崩溃容错（CFT）或拜占庭容错（BFT）共识协议，而无需昂贵的挖矿。
在许可的情况下，降低了参与者故意通过智能合约引入恶意代码的风险，因为参与者的操作都会被记录在区块链上，而参与者并不匿名，因此可以很容易识别犯罪并进行审计。

## 智能合约

智能合约在Fabric中被称为“链码”。

三个关键点适用于智能合约，更适用于应用于平台时：
+ 多个智能合约在网络中同时运行，
+ 它们可以动态部署，很多情况下任何人都可以部署，
+ 应用代码应视为不被信任的，甚至可能是恶意的。

大多数现有的具有智能合约能力的区块链平台遵循**顺序执行**架构，其中共识协议：
+ 验证并将交易排序，然后将它们传播到所有的节点，
+ 每个节点按顺序执行交易。

采用顺序执行架构的区块链执行智能合约的结果一定是正确的。但顺序执行所有交易会导致智能合约的性能和规模被限制。

## 一种新方法

针对交易，Fabric引入了一种新的架构，称为**执行-排序-验证**。为解决顺序执行模型面临的弹性、灵活性、可伸缩性、性能和机密性问题，交易流分为三个步骤：
+ 执行一个交易并检查其正确性，从而给它背书，
+ 通过可插拔的共识协议将交易排序，
+ 提交交易到账本前，现根据特定应用程序的背书策略验证交易。

因为Fabric在交易顺序达成最终一致前执行交易，因此与顺序执行模式完全不同。

在Fabric中，特定应用程序的背书策略可以指定需要哪些节点或多少节点来保证给定的智能合约正确执行，因此每个交易只需要由满足交易的背书策略所必须的节点的子集来执行（背书）。
这样可以并行执行，从而提高系统的整体性能和规模。

## 隐私和保密性

在一个公共的、无需许可的区块链网络中，利用PoW作为共识模型，意味着合约和交易数据都不保密。
加密数据是提供保密性的一种方法，然而在PoW的无需许可网络中，有足够的时间和计算资源，加密可能会被破解。
零知识证明也是一种解决保密性问题的方法，但需要权衡资源消耗与保密性能。因为计算零知识证明（ZKP）需要相当多的时间和计算资源。

Fabric通过通道架构和私有数据特性实现保密。通道方面，Fabric网络中的成员组建了一个子网络，子网络中的成员可以看到其所参与的交易，只有参与到通道的节点才有权访问智能合约（链码）和交易数据，以此保证了隐私性和保密性。私有数据在跨通道中使用，实现了和通道相同的隐私能力并且不用创建和维护独立的通道。

## 可插拔共识

一个Fabric网络中可以有多种排序服务以支持不同的应用或应用需求，共识模块可根据特定部署或解决方案的信任假设来定制其实现。
这种模块化架构允许平台依赖完善的工具包进行CFT（崩溃容错）或BFT（拜占庭容错）的排序。

## 性能和可扩展性

一个区块链平添的性能可能会受到许多因素的影响，例如交易大小、区块大小、网络大小以及硬件限制等。

## 结论

Fabric是Hyperledger（超级账本）中最活跃的项目。Fabric的这些特性使其称为一个高度可扩展的系统，该平台是支持灵活的信任假设的许可区块链，因此能够支持从政府、金融、供应链物流到医疗保健等各种的行业应用。

