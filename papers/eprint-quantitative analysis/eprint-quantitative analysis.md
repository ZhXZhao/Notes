<!--
 * @Author: ZhXZhao
 * @Date: 2020-06-17 10:39:08
 * @LastEditors: ZhXZhao
 * @LastEditTime: 2020-06-17 14:29:11
 * @Description:
-->
# A Quantitative Analysis of Security, Anonymity and Scalability for the Lightning Network

---


## 正文

这篇文章主要对值隐私攻击（即揭露交易金额），关系匿名攻击（即揭露交易的发送者和接收者），虫洞攻击（即通过密谋，窃取中间诚实节点的交易费）和由于并发HTLCs的数量限制导致的Dos攻击和可扩展性问题做了量化分析。

## 数据集

从https://ln.bigsun.xyz 取了2020.02.25的一张快照。还取了从2018年4月到2020年2月每个月一号的一系列闪电网络历史快照。

## 安全和隐私

**值隐私攻击**：只要在支付路由的路径中有一个恶意节点，那么就认为值隐私攻击可以发生。

**关系匿名攻击**：在支付路由路径上的第一个节点和最后一个节点都是恶意节点，那么认为关系匿名攻击可以发生。

**虫洞攻击**：在支付路由路径上的节点中，有**不相邻**的两个恶意节点，那么认为虫洞攻击可以发生。

三种攻击策略：
1. 针对**度最高**的节点进行攻击。
2. 针对**通道容量最大**的节点进行攻击。
3. **随机**选择节点攻击。

定义一笔交易从$u_i$到$u_j$，受到攻击的概率：
$$\alpha_{<u_i,u_j>}:=\frac{易受攻击的路径数目}{易受攻击的路径数目+安全的路径数目}$$

### 对策

节点尽可能去连接那些度数低的节点，使得节点的度分布更加均匀。但这样可能会带来一个问题，节点随机宕机会使得网络的连通度变差，这就需要在连通度和安全与隐私之间做一个权衡。
或者是节点可以选择一个可信的代理节点来路由交易，这样路径上的第一个节点就是可靠的，可以避免关系匿名攻击和大部分路径长度不超过3的虫洞攻击。

## HTLC限制

在一个支付通道中，由于HTLC的限制存在，即便通道容量是足够的，也会出现并发的交易数达到上限的情况。

在大多数闪电网络的实现当中，对交易额都有一个下限的限制：546 satoshis。
