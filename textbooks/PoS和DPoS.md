<!--
 * @Author: ZhXZhao
 * @Date: 2021-01-05 20:15:45
 * @LastEditors: ZhXZhao
 * @LastEditTime: 2021-01-05 22:14:36
 * @Description:
-->
# PoS和DPoS

共识机制的核心问题：如何确定记账认且保证不作恶？
在区块链中，共识机制决定谁负责生成新的区块以及维护区块链的统一。

## PoW工作量证明
pow是以时间和资源为担保，确定记账的真实性和有效性。
pow的缺点：
1. 耗电大，资源浪费严重
2. 算力集中
3. 51攻击

## PoS权益证明
起源：出于对比特币挖矿能源浪费方面的考量，pos被提出来 https://bitcointalk.org/index.php?topic=27787.0 在比特币社区中被广泛讨论。
PoS是指一大类算法的总称，不同的币使用不同的依据来筛选记账人。
币龄：持有币的数量×天数（ppcoin）
币数：未来币（Nxt），黑币（Blackcoin）
vrf随机函数：Algorand （pure pos）

PoS的优点：
1. 不需要拼算力，不浪费电
2. 缩短共识时间，效率提升
PoS的缺点：
1. 账本分叉问题，当账本出现分叉时，矿工会同时在两条分叉上进行挖矿，因为挖矿没有成本，且诚实节点更愿意见到分叉情况，会增大潜在收益。
2. 长程攻击问题，篡改历史记录非常简单。
3. 冷启动问题，没有动力促进币的流通。
1问题可以通过引入惩罚机制来解决。
2问题引入检查点机制，阻止修改检查点之前的区块记录。
3问题可以通过pos+pow混合机制来解决，早期通过pow创建货币，由于pow的性质，矿工在挖矿过程中需要资金来升级硬件，所以可以促进币的流通。

## DPoS委任权益证明
DPoS是PoS的一个变种。
由全网的节点投票出一部分节点，这部分节点具有记账权且能够验证区块。
代表节点的职能：
1. 保证节点在线，并正常运行
2. 收集区块链网络里的交易
3. 验证交易，把交易打包到区块
4. 广播区块，其他节点验证后把区块添加到自己的数据库
