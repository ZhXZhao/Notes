<!--
 * @Author: ZhXZhao
 * @Date: 2020-02-22 13:52:22
 * @LastEditors: ZhXZhao
 * @LastEditTime: 2020-02-22 14:36:51
 * @Description: 
 -->

# 区块结构与区块头

---

- [区块结构与区块头](#%e5%8c%ba%e5%9d%97%e7%bb%93%e6%9e%84%e4%b8%8e%e5%8c%ba%e5%9d%97%e5%a4%b4)
  - [区块结构](#%e5%8c%ba%e5%9d%97%e7%bb%93%e6%9e%84)
  - [区块头](#%e5%8c%ba%e5%9d%97%e5%a4%b4)


## 区块结构

区块是一种被包含在公开账簿（区块链）里的聚合了交易信息的容器数据结构。它由一个包含元数据的**区块头**和紧跟其后的构成区块主体的**一长串交易**组成。区块头是80字节，而平均**每个交易**至少是250字节，而且平均每个区块至少包含超过500个交易。

区块结构

| 大小                | 字段       | 描述                             |
| ------------------- | ---------- | -------------------------------- |
| 4字节               | 区块大小   | 用字节表示的该字段之后的区块大小 |
| 80字节              | 区块头     | 组成区块头的几个字段             |
| 1-9字节（可变整数） | 交易计数器 | 交易的数量                       |
| 可变                | 交易       | 记录在区块里的交易信息           |


## 区块头

区块头由三组区块元数据组成。
1. 引用父区块哈希值的数据。
2. 元数据。难度、时间戳、nonce（随机数），与挖矿竞争相关。
3. merkle树根。总结区块中的所有交易。

区块头结构

| 大小   | 字段         | 描述                                         |
| ------ | ------------ | -------------------------------------------- |
| 4字节  | 版本         | 版本号，用于跟踪软件/协议的更新              |
| 32字节 | 父区块哈希值 | 引用区块链中父区块的哈希值                   |
| 32字节 | merkle树根   | 该区块中交易的merkle树根的哈希值             |
| 4字节  | 时间戳       | 该区块产生的近似时间（精确到秒的Unix时间戳） |
| 4字节  | 难度目标     | 该区块工作量证明算法的难度目标               |
| 4字节  | nonce        | 用于工作量证明算法的计数器                   |


